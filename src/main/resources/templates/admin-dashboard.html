<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">

<style>
td {
	word-break: break-word;
}

/* Mobile-friendly card layout instead of table */
@media ( max-width : 768px) {
	table thead {
		display: none; /* Hide table headers */
	}
	table, table tbody, table tr, table td {
		display: block;
		width: 100%;
	}
	table tbody tr {
		margin-bottom: 15px;
		border: 1px solid #ddd;
		border-radius: 6px;
		padding: 10px;
		background: #fff;
		box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
	}
	table tbody td {
		text-align: left;
		padding: 8px 10px;
		border: none;
		border-bottom: 1px solid #eee;
		font-size: 0.95rem;
	}
	table tbody td:last-child {
		border-bottom: none;
	}
	table tbody td::before {
		content: attr(data-label);
		font-weight: bold;
		display: block;
		margin-bottom: 4px;
		color: #0d6efd;
	}
}

/* Navbar & heading shrink on mobile */
@media ( max-width : 576px) {
	.navbar-brand {
		font-size: 1rem;
	}
	.btn-sm {
		font-size: 0.8rem;
		padding: 4px 8px;
	}
	h4 {
		font-size: 1.1rem;
	}
}
</style>
</head>
<body class="bg-light">

	<!-- ‚úÖ Navbar -->
	<nav class="navbar navbar-dark bg-dark shadow">
		<div
			class="container-fluid d-flex justify-content-between align-items-center">
			<span class="navbar-brand fw-bold">‚öôÔ∏è Admin Dashboard</span> <a
				class="btn btn-outline-light btn-sm" th:href="@{/admin/logout}">Logout</a>
		</div>
	</nav>

	<!-- ‚úÖ Main Content -->
	<div class="container mt-4">
		<div class="card shadow-lg border-0 rounded-3">
			<div class="card-header bg-primary text-white">
				<h4 class="mb-0 text-center">üìã Submitted Contact Forms</h4>
			</div>
			<div class="card-body">

				<!-- ‚úÖ Responsive Table / Card -->
				<div class="table-responsive">
					<table
						class="table table-hover table-bordered align-middle text-center">
						<thead class="table-dark">
							<tr>
								<th>ID</th>
								<th>Name</th>
								<th>Email</th>
								<th class="w-50">Message</th>
								<th>Date</th>
								<th>Document</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="form : ${formData}">
								<td data-label="ID" th:text="${form.id}"></td>
								<td data-label="Name" th:text="${form.name}"></td>
								<td data-label="Email" th:text="${form.email}"></td>
								<td data-label="Message" th:text="${form.message}"></td>
								<td data-label="Date"
									th:text="${form.date != null ? #temporals.format(form.date, 'dd-MM-yyyy HH:mm') : ''}"></td>
					<td><a th:href="@{'/form/download/' + ${form.id}}" class="btn btn-sm btn-primary">
    Download PDF
</a></td>
							</tr>
						</tbody>
					</table>
				</div>

				<!-- ‚úÖ Pagination -->
				<nav aria-label="Page navigation">
					<ul class="pagination justify-content-center flex-wrap mt-3">
						<li class="page-item"
							th:classappend="${currentPage == 0} ? 'disabled'"><a
							class="page-link"
							th:href="@{/admin/dashboard(page=${currentPage-1})}">Previous</a>
						</li>

						<li class="page-item"
							th:each="i : ${#numbers.sequence(0, totalPages-1)}"
							th:classappend="${i == currentPage} ? 'active'"><a
							class="page-link" th:href="@{/admin/dashboard(page=${i})}"
							th:text="${i+1}">1</a></li>

						<li class="page-item"
							th:classappend="${currentPage == totalPages-1} ? 'disabled'">
							<a class="page-link"
							th:href="@{/admin/dashboard(page=${currentPage+1})}">Next</a>
						</li>
					</ul>
				</nav>

			</div>
		</div>
	</div>

</body>
</html>
